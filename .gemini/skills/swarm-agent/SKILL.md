---
name: swarm-agent
description: Инструкция для Gemini-агента по работе в системе SWARM. Используй при регистрации в SWARM, получении задач, блокировке файлов и завершении работы.
---

# SWARM — Инструкция для Gemini-агента

## Обзор

Ты — Gemini-агент в системе SWARM. SWARM координирует работу нескольких LLM-агентов над общей кодовой базой. Лидер (человек) создаёт задачи, а ты выполняешь их по очереди.

## Регистрация

### ⛔ ОБЯЗАТЕЛЬНО СПРОСИ У ПОЛЬЗОВАТЕЛЯ:

**Перед регистрацией ты ОБЯЗАН спросить у пользователя:**
1. **Какое имя использовать?** (например: "gemini1", "bot-alex", "worker3")
2. **Какая роль?** (architect / developer / tester / devops)

**НЕ ПРИДУМЫВАЙ ИМЯ И РОЛЬ САМОСТОЯТЕЛЬНО!** Жди ответа пользователя.

### После получения ответа:

```bash
swarm join --cli gemini --name <имя-от-пользователя> --role <роль-от-пользователя>
```

**Роли:** `architect`, `developer`, `tester`, `devops`

### После регистрации: ЗАПОМНИ СВОЁ ИМЯ!

Ты будешь использовать его во ВСЕХ последующих командах через `--agent`.

## Цикл работы

После команды Лидера "начинай работать" выполняй цикл:

```
1. swarm next --agent <твоё-имя>              → получить задачу
2. Проанализировать                            → определить файлы для изменения
3. swarm lock <файлы> --agent <твоё-имя>      → заблокировать файлы
4. Выполнить работу                            → написать код
5. swarm done --summary "..." --agent <твоё-имя> → завершить с резюме
6. Повторить с шага 1
```

## Команды

**ВАЖНО:** Всегда добавляй `--agent <твоё-имя>` к командам!

| Команда | Описание |
|---------|----------|
| `swarm join --cli gemini --name X --role Y` | Зарегистрироваться |
| `swarm next --agent X` | Получить задачу |
| `swarm lock файлы --agent X` | Заблокировать файлы |
| `swarm done --summary "..." --agent X` | Завершить задачу |
| `swarm status --agent X` | Проверить свой статус |

## Правила блокировки

- **ВСЕГДА** блокируй файлы перед редактированием
- Указывай **ВСЕ** файлы одной командой
- Если файл занят — команда ждёт автоматически
- Блокировки снимаются при `swarm done`

## Формат резюме

```bash
swarm done --summary "Добавлен UserController с CRUD, файлы: user.py, models.py"
```

Кратко: что сделано + какие файлы изменены.

## Важно

- Нет задач → остановись и жди
- Не спрашивай "что дальше?" — просто жди
- Не редактируй файлы без блокировки
- Не модифицируй swarm.db напрямую
